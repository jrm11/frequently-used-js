<!doctype html>
<html>

<head>
  <title>标题</title>
  <meta charset="utf-8">
</head>

<body>
  <script>

    //鄙视题: 去掉数组中重复的元素(百万数量级)
    function unique1(arr) {
      //i遍历arr,同时创建空数组result
      for (var i = 0, result = []; i < arr.length; i++) {
        //j遍历result
        for (var j = 0; j < result.length; j++) {
          //如果result中当前元素等于arr中当前元素,就退出循环
          if (result[j] === arr[i]) {
            break;
          }
        } //(遍历结束)
        //如果j等于result的length
        if (j === result.length) {
          //将arr中当前元素追加到result中
          result[result.length] = arr[i];
        }
      }
      return result; //返回result
    }

    function unique2(arr) {
      //i遍历arr,同时创建两个空数组result和hash
      for (var i = 0, result = [], hash = []; i < arr.length; i++) {
        //如果hash中以当前元素为key的元素是undefined
        if (hash[arr[i]] === undefined) {
          //将当前元素追加到result结尾
          result[result.length] = arr[i];
          //在hash中添加一个新元素: key为当前元素值,值为true
          hash[arr[i]] = true;
        }
      } //(遍历结束)
      return result; //返回result
    }

    function unique3(arr) {
      return Array.from(new Set(arr));
    }

    function unique4(arr) {
      var newArr = [];
      for (var i = 0; i < arr.length; i++) {
        if (newArr.indexOf(arr[i]) == -1) {
          newArr.push(arr[i]);
        }
      }
      return newArr;
    }

    function unique5(arr) {
      var res = [];
      var obj = {};
      for (var i = 0; i < arr.length; i++) {
        if (!obj[arr[i]]) {
          res.push(arr[i]);
          obj[arr[i]] =1;
        }
      }

      return res;
    }

    // var chong = unique4(arr1);
    //生成100万个0~1000之间的随机数
    for (var i = 0, arr = []; i < 1000000; i++) {
      arr[i] = Math.floor(Math.random() * 1000);
    }
    // console.time("unique1"); //计时器开始
    // unique1(arr);
    // console.timeEnd("unique1");
    console.time("unique2");
    unique2(arr);
    console.timeEnd("unique2");

    console.time("unique3");
    unique3(arr);
    console.timeEnd("unique3");
    
    // console.time("unique4");
    // unique4(arr);
    // console.timeEnd("unique4");
  </script>
</body>

</html>
